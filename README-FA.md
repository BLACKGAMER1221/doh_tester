# ๐ DoH-Tester

๐บ๐ธ [English](README.md) | ๐ท๐บ [ะัััะบะธะน](README-RU.md) | ๐จ๐ณ [ไธญๆ](README-ZH.md) | ๐ฎ๐ท [ูุงุฑุณ](README-FA.md)

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

ุงุจุฒุงุฑ ูพุฑุณุฑุนุช ู ฺูุฏูุฎ ุจุฑุง ุชุณุช ููุงุท ุงูุชูุง DNS-over-HTTPS (DoH) ุจุง ุชุดุฎุต ููุดููุฏ ูพุฑูุชฺฉูุ ููุชุฑฺฏุฐุงุฑ ูุงุจู ุชูุธู ู ูุฏุฑุช ุฎูุฏฺฉุงุฑ ูุณุชโูุง.

## ๐ ูุนุฑู

 ุงุจุฒุงุฑ DoH-tester ููุงุท ุงูุชูุง DoH ุฑุง ุฏุฑ ููุงุณ ุจุงูุง ุงุนุชุจุงุฑุณูุฌ ูโฺฉูุฏ ู ุงุชุตุงู TCPุ ููุฏุดฺฉ TLS ู ุญู ูุงูุน DNS ุฑุง ุฏุฑ ฺูุฏู ูพุฑูุชฺฉู (ูุฑูุช ูุงุฑ GET/POST ู API ูุจุชู ุจุฑ JSON) ุจุฑุฑุณ ูโฺฉูุฏ. ุงู ุงุจุฒุงุฑ ุจุฑุง ูุฏุฑุงู ุดุจฺฉูุ ูุนุงูุงู ุญุฑู ุฎุตูุต ู ุชูุณุนูโุฏููุฏฺฏุงู ุทุฑุงุญ ุดุฏู ฺฉู ูุงุฒ ุจู ุญูุธ ุฏุณุชุฑุณ ูพุงุฏุงุฑ ู ุจุฏูู ุณุงูุณูุฑ ุจู DNS ุฏุฑ ูุญุทโูุง ุดุจฺฉูโุง ุฎุตูุงูู ุฏุงุฑูุฏ.

---

### ูฺฺฏโูุง ฺฉูุฏ

* โ ุชุณุช ุงุชุตุงู TCP (IPv4 ู IPv6)
* ๐ ุจุฑุฑุณ ููุฏุดฺฉ TLS (ุจุง ุญุงูุช ูุงุงูู ุงุฎุชุงุฑ)
* ๐ ุญู DNS ุงุฒ ุทุฑู:

  * DoH GET (ูุฑูุช ูุงุฑ)
  * DoH POST (ูุฑูุช ูุงุฑ)
  * DoH GET (API ูุจุชู ุจุฑ JSON)
* โก ุชุณุช ููุงุฒ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณุชุฎุฑ ูุฎโูุง
* ๐ง ุฏุณุชูโุจูุฏ ููุดููุฏ (WORKING / FLAKY / BLOCKED)
* ๐ ุงูุฏุงุฒูโฺฏุฑ ุชุฃุฎุฑ (ููโุซุงูู)
* ๐งพ ุฎุฑูุฌ ุฌุฏูู ุฎูุงูุง ุจุฑุง ุงูุณุงู
* ๐งน ุญุงูุช ุฎุฑูุฌ ุชูุฒ (ููุท URLูุง)
* ๐ฆ ุฎุฑูุฌ JSON ุงุฎุชุงุฑ (ุจุง ุจุฑฺุณุจ ุฒูุงู ุฎูุฏฺฉุงุฑ ุง ูุงู ุฏูุฎูุงู)
* ๐ ูพฺฉุฑุจูุฏ ุงุฒ ุทุฑู ูุงู `config.json`
* ๐ ูพุงฺฉโุณุงุฒ ุฎูุฏฺฉุงุฑ ุงุฎุชุงุฑ ููุงุท ุงูุชูุง ุณุงูู ุงุฒ ูุงู ููุจุน

---

## ๐ฏ ููุงุฑุฏ ุงุณุชูุงุฏู

| ุณูุงุฑู                           | ููุด DoH-Tester                                                                                                   |
| -------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| **ุฏูุฑ ุฒุฏู ุณุงูุณูุฑ**               | ฺฉุดู ุณุฑุน ุฑุฒูููุฑูุง DoH ฺฉู ูุงูุนุงู ฺฉุงุฑ ูโฺฉููุฏ ุจุฑุง ุนุจูุฑ ุงุฒ ูุณุฏูุฏุณุงุฒ ูุจุชู ุจุฑ DNS ู ุฏุณุชุฑุณ ุจู ูพูุชูุฑูโูุง ููุชุฑุดุฏู |
| **ูฺฏูโุฏุงุฑ ุงุจุฒุงุฑูุง ุญุฑู ุฎุตูุต** | ุณุงุฎุช ู ุจูโุฑูุฒุฑุณุงู ูุณุชโูุง ูุงุจูโุงุนุชูุงุฏ DoH ุจุฑุง VPNูุงุ ูพุฑูฺฉุณโูุงุ ุชูููโูุง ุง ุชูุธูุงุช ูุฑูุฑฺฏุฑ                     |
| **ุจูููโุณุงุฒ ุนููฺฉุฑุฏ**            | ุงูุฏุงุฒูโฺฏุฑ ุชุฃุฎุฑ ุจุฑุง ุงูุชู ุณุฑุนโุชุฑู ุฑุฒูููุฑ ูุชูุงุณุจ ุจุง ูููุนุช ุดูุง                                               |
| **ููุฒ ุดุจฺฉู**                   | ุงุนุชุจุงุฑุณูุฌ ุฒุฑุณุงุฎุช DoH ุฏุฑ ุดุจฺฉูโูุง ุณุงุฒูุงู ุง ISP                                                                |
| **ูพุงุด ุฒุฑุณุงุฎุช**                 | ุจุฑุฑุณ ุณูุงูุช ุฎูุฏฺฉุงุฑ ุณุฑูุฑูุง ุฎุตูุต DoH                                                                             |

<details>
<summary><b>๐ ุฏูุฑ ุฒุฏู ุณุงูุณูุฑ (ุจุฑุง ุจุงุฒ ุดุฏู ฺฉูฺฉ ฺฉูุฏ)</b></summary>

ุงุชุตุงู ุจู ูพูุชูุฑูโูุง ููุชุฑุดุฏู ูุงููุฏ YouTubeุ Instagramุ Twitter/X ู ุณุงุชโูุง ุฎุจุฑ ุจุง ุญู ุฏุงูููโูุง ุงุฒ ุทุฑู ุงุชุตุงู HTTPS ุฑูุฒูฺฏุงุฑโุดุฏู ู ุนุจูุฑ ุงุฒ ููุชุฑูฺฏ ูุจุชู ุจุฑ DNS ู ุฑุจุงุด DNS.

**ูุญูู ุนููฺฉุฑุฏ:**

* ุฏุฑุฎูุงุณุชโูุง ุงุณุชุงูุฏุงุฑุฏ DNS (UDP ูพูุฑุช ตณ) ุฑูุฒูฺฏุงุฑ ูุดุฏู ู ุจูโุฑุงุญุช ุชูุณุท ูุงุฑูุงูโูุง ุฑูฺฏุฑ ูโุดููุฏ
* DoH ุฏุฑุฎูุงุณุชโูุง DNS ุฑุง ุฏุงุฎู ุชุฑุงูฺฉ HTTPS (ูพูุฑุช ดดณ) ฺฉูพุณููู ูโฺฉูุฏ ู ุงุฒ ูุฑูุฑ ูุจ ูุนููู ูุงุจู ุชุดุฎุต ูุณุช
* ููุฏ ุฏุฑ ุดุจฺฉูโูุง ุจูโุดุฏุช ุณุงูุณูุฑุดุฏู ฺฉู ุฏุฑ ุขูโูุง:

  * DNS ุงุณุชุงูุฏุงุฑุฏ ูุณููู ุดุฏู ุงุณุช (ุจุฑฺฏุฑุฏุงูุฏู IPูุง ูุงุฏุฑุณุช)
  * ูุงู ุฏุงูููโูุง ุฏุฑ ุณุทุญ ุฑุฒูููุฑ DNS ูุณุฏูุฏ ุดุฏูโุงูุฏ
  * ููุชุฑูฺฏ SNI ุงุนูุงู ุดุฏู ูู ุฑูุฒูฺฏุงุฑ DNS ูููุฒ ูุณุฏูุฏ ูุดุฏู ุงุณุช

**ูฺฉุชู ููู:** ุจุฑุง ูุซุงู ุงฺฏุฑ VPNูุง ุง IPูุง Cloudflare ุฏุฑ **ูุงู IP** ูุณุฏูุฏ ุดุฏู ุจุงุดูุฏ (ูุงุฑูุงู ุจุณุชูโูุง ุจู ุขู IPูุง ุฑุง Drop ฺฉูุฏ)ุ DoH ุจูโุชููุง ููโุชูุงูุฏ ุฏุณุชุฑุณ ุจู ุขู IPูุง ุฎุงุต ุฑุง ุจุงุฒฺฏุฑุฏุงูุฏ. ุงูุง DoH ูโุชูุงูุฏ ุจู ุดูุง ฺฉูฺฉ ฺฉูุฏ:

1. ููุงุท ุงูุชูุง ุฌุงฺฏุฒู ู ูุนุงู ฺฉู ูููุฒ ูุณุฏูุฏ ูุดุฏูโุงูุฏ ุฑุง ูพุฏุง ฺฉูุฏ
2. ุฏุงูููโูุง VPN ุฑุง ุจู IP ุญู ฺฉูุฏ (ุฏุฑ ุตูุฑุช ฺฉู ููุท DNS ูุณุฏูุฏ ุดุฏู ุจุงุดุฏุ ูู ุฎูุฏ IPูุง)
3. ุจู ููุงุท ุงูุชูุง ุฌุงฺฏุฒู ุง ยซdomain-frontedยป ุฏุฑ CDNูุง ฺฉู ุฏุฑ ุณุทุญ IP ูุณุฏูุฏ ูุณุชูุฏ ุฏุณุชุฑุณ ูพุฏุง ฺฉูุฏ

</details>

<details>
<summary><b>๐ ูฺฏูโุฏุงุฑ ุงุจุฒุงุฑูุง ุญุฑู ุฎุตูุต (ุจุฑุง ุจุงุฒ ุดุฏู ฺฉูฺฉ ฺฉูุฏ)</b></summary>

ุญูุธ ุฏุณุชุฑุณ ุจู ุฒุฑุณุงุฎุช ุญุฑู ุฎุตูุต ุฏุฑ ุดุฑุงุท ฺฉู ุฑูุดโูุง ุงุณุชุงูุฏุงุฑุฏ ฺฉุดู ฺฉุงุฑ ููโฺฉููุฏ:

* **ุฏุณุชุฑุณ ุจู ุฏุงูููโูุง ูุณุฏูุฏุดุฏู VPN:** ุงฺฏุฑ ุฏุงููู ุงุฑุงุฆูโุฏููุฏู VPN ุดูุง (ูุซูุงู `vpn-provider.com`) ุงุฒ ุทุฑู ุฑุจุงุด DNS ูุณุฏูุฏ ุดุฏู ุจุงุดุฏ ูู ุณุฑูุฑูุง ุฏุฑ ุณุทุญ IP ูุณุฏูุฏ ูุดุฏู ุจุงุดูุฏุ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ููุงุท ุงูุชูุง DoH ุณุงููุ ุขุฏุฑุณ ูุงูุน ุณุฑูุฑูุง ุฑุง ุญู ฺฉุฑุฏู ู ุงุชุตุงู ุฑุง ุญูุธ ฺฉูุฏ.

* **ุชูููโุณุงุฒ DNS:** ุงุณุชูุงุฏู ุงุฒ ููุงุท ุงูุชูุง ุชุฃุฏุดุฏู DoH ุจูโุนููุงู ูุงู ุงูุชูุงู ุจุฑุง ุงุจุฒุงุฑูุง ุชูููโุณุงุฒ DNS ูุงููุฏ:

  * [dnstt](https://www.bamsoftware.com/software/dnstt/) โ ุชููู TCP ุฑู DNS ฺฉู ุงุฒ ุทุฑู ุฑุฒูููุฑูุง DoH ฺฉุงุฑ ูโฺฉูุฏ
  * [DNSCrypt-proxy](https://github.com/DNSCrypt/dnscrypt-proxy) โ ุงูฺฉุงู ูุณุฑุงุจ ุงุฒ ุทุฑู DoH ุจุง ุฑููโูุง ูุงุดูุงุณ
  * [Iodine](https://github.com/yarrick/iodine) โ ุชููู IP ุฑู DNS (ูุงุฒููุฏ UDPุ ูู ูุงุจู ุงุณุชูุงุฏู ุงุฒ DoH ุจุฑุง bootstrap)

* **ุงุจุฒุงุฑูุง ุฏูุฑ ุฒุฏู ุณุงูุณูุฑ ุฏุฑ ูุฑุญูู Bootstrap:** ุจุณุงุฑ ุงุฒ ุงุจุฒุงุฑูุง ุถุฏุณุงูุณูุฑ (Tor bridgeูุงุ Shadowsocksุ WireGuard) ุงุจุชุฏุง ูุงุฒ ุจู ุญู ฺฉ ุณุฑูุฑ bootstrap ุฏุงุฑูุฏ. ุงฺฏุฑ ุงู ุฌุณุชุฌู ุงููู DNS ูุณููู ุดุฏู ุจุงุดุฏุ ุงุจุฒุงุฑ ูุงุฏุฑ ุจู ุงุชุตุงู ูุณุช. ุญู ุงููู ุงุฒ ุทุฑู DoHุ IPูุง ุตุญุญ ุฑุง ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุงุจุฒุงุฑูุง ูุฑุงูู ูโฺฉูุฏ.

</details>

<details>
<summary><b>โก ุจูููโุณุงุฒ ุนููฺฉุฑุฏ (ุจุฑุง ุจุงุฒ ุดุฏู ฺฉูฺฉ ฺฉูุฏ)</b></summary>

ุงูุชู ุฑุฒูููุฑ ุจููู ูุชูุงุณุจ ุจุง ุดุฑุงุท ุดุจฺฉู ุดูุง:

* ุงูุฏุงุฒูโฺฏุฑ ููโุฒูุงู ุชุฃุฎุฑ ุจู ฺูุฏู ููุทู ุงูุชูุง DoH
* ุดูุงุณุง ุจูููโุณุงุฒโูุง ูุณุฑุงุจ ุฌุบุฑุงูุง (ุจุฑุฎ ISPูุง ุจู PoPูุง ูุฒุฏฺฉโุชุฑ ูุณุฑุงุจ ูโฺฉููุฏ)
* ููุงุณู ุณุฑุนุช ุญู ุจู ูพุงุฏูโุณุงุฒโูุง ูุฑูุช ูุงุฑ ู API ูุจุชู ุจุฑ JSON
* ุณุงุฎุช ูุณุชโูุง ุฑุฒูููุฑ ุขฺฏุงู ุงุฒ ูููุนุช ฺฉู ุณุฑุนโุชุฑู ฺฏุฒูู ุฑุง ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุงูุชุฎุงุจ ูโฺฉููุฏ

</details>

<details>
<summary><b>๐ข ููุฒ ุดุจฺฉู (ุจุฑุง ุจุงุฒ ุดุฏู ฺฉูฺฉ ฺฉูุฏ)</b></summary>

ุงุนุชุจุงุฑุณูุฌ ุฏุณุชุฑุณโูพุฐุฑ ู ุงูุทุจุงู ุฒุฑุณุงุฎุช DoH:

* ุชุณุช ุงูโฺฉู ฺฉุฏุงู ุฑุฒูููุฑูุง ุนููู DoH ุงุฒ ุดุจฺฉูโูุง ุณุงุฒูุงู ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ
* ุจุฑุฑุณ ูพุงุณุฎโุฏู ุตุญุญ ุณุฑูุฑูุง ุฎุตูุต/ุฏุงุฎู DoH
* ุดูุงุณุง ุฑูฺฏุฑ TLS (ูุงูโุงูุฒุงุฑูุง ฺฉู ุงุชุตุงู DoH ุฑุง ูุฎุชู ูโฺฉููุฏ)
* ุชููุฏ ฺฏุฒุงุฑุดโูุง ุงูุทุจุงู ฺฉู ูุงุจูุช ุญุฑู ุฎุตูุต DNS ุฑุง ุฏุฑ ุจุฎุดโูุง ูุฎุชูู ุดุจฺฉู ูุดุงู ูโุฏูุฏ

</details>

## โจ ููุฑุณุช ฺฉุงูู ูุงุจูุชโูุง

<details>
<summary><strong>๐ ูุงุจูุชโูุง ุงุตู ุชุณุช</strong></summary>

* **ูพุดุชุจุงู ุงุฒ ูพุฑูุชฺฉู DoH**: ุงุณุชุงูุฏุงุฑุฏ RFC 8484 (ูุฑูุช ูุงุฑ DNS) ุงุฒ ุทุฑู GET ู POSTุ ุจูโููุฑุงู API ูุจุชู ุจุฑ JSON (ุณุงุฒฺฏุงุฑ ุจุง Google ู Cloudflare)
* **ุงุนุชุจุงุฑุณูุฌ ูุงูโุง**: ุงุชุตุงู TCP โ ููุฏุดฺฉ TLS โ ุญู DNS ุฏุฑ ุณุทุญ ุจุฑูุงูู DoH
* **ุชุดุฎุต ููุดููุฏ ูพุฑูุชฺฉู**: ุชุณุช ุฎูุฏฺฉุงุฑ ูุฑูุช ูุงุฑ ู API JSON ุฏุฑ ุตูุฑุช ูพุดุชุจุงู
* **ุดุจฺฉู ุฏููพุดุชู**: ูพุดุชุจุงู ุงุฒ IPv4 ู IPv6 ุจุง ุจุงุฒฺฏุดุช ุฎูุฏฺฉุงุฑ
* **ุชุณุช ุงูู ุจุฑุง ISP**: ุงูุฌุงู ุญู ูุงูุน DNS ุจุฏูู ุชุญุฑฺฉ ูุณูููโุณุงุฒ ุง ููุชุฑูฺฏ DNS

</details>

<details>
<summary><strong>โก ุนููฺฉุฑุฏ ู ูพุงุฏุงุฑ</strong></summary>

* **ููุชูุฑ ุชุณุช ููุงุฒ**: ุงุณุชุฎุฑ ูุฎ ูุงุจู ุชูุธู ุจุฑุง ุชุณุช ุณุฑุน ููุงุท ุงูุชูุง
* **ููุทู ุชูุงุด ูุฌุฏุฏ ููุงูู**: ฺูุฏู ุชูุงุด ุจุฑุง ูุฑ ููุทู ุงูุชูุง ุจุง ุขุณุชุงูู ููููุช ูุงุจู ุชูุธู
* **ุงูุฏุงุฒูโฺฏุฑ ุชุฃุฎุฑ**: ุฒูุงูโุณูุฌ ุฏูู ูุฑ ฺฉูุฆุฑ ุฏุฑ ููโุซุงูู
* **ุฎุฑูุฌ ุงูู ุจุง Ctrl+C**: ุฎุงููุด ูุฑู ุจุง ุฐุฎุฑู ูุชุงุฌ ุฌุฒุฆ
* **ุฏุณุชูโุจูุฏ ููุดููุฏ**: ุทุจููโุจูุฏ ููุงุท ุงูุชูุง ุจู **WORKING**ุ **FLAKY** ุง **BLOCKED**

</details>

<details>
<summary><strong>๐ ุงููุช ู ุนุจโุงุจ</strong></summary>

* **ุงุนุชุจุงุฑุณูุฌ TLS**: ุจุฑุฑุณ ฺฏูุงู ู ููุฏุดฺฉ ุจุง ุญุงูุช ูุงุงูู ุงุฎุชุงุฑ
* **ุจุงุฒุฑุณ ฺฏูุงู**: ุซุจุช ููุถูุน ฺฏูุงู TLS ู ุฌุฒุฆุงุช Cipher
* **ุทุจููโุจูุฏ ุฎุทุง**: ุชูฺฉฺฉ ูุณุฏูุฏุณุงุฒ TCPุ ุฑูฺฏุฑ TLS ู ุฎุทุงูุง ุณุทุญ ุจุฑูุงูู DoH
* **ฺฏุฒุงุฑุด IP ุญูโุดุฏู**: ููุงุด ูุชุงุฌ ูุงูุน ุญู DNS ุจุฑุง ุชุฃุฏ

</details>

<details>
<summary><strong>๐ ุฎุฑูุฌ ู ฺฏุฒุงุฑุดโุฏู</strong></summary>

* **ูุฑูุชโูุง ุฎุฑูุฌ ุงูุนุทุงูโูพุฐุฑ**:

  * ุฌุฏููโูุง ุฎูุงูุง ุจุฑุง ุงูุณุงู
  * ูุณุชโูุง ุชูุฒ ููุท ุดุงูู URL (ููุงุณุจ ุงุณฺฉุฑูพุช)
  * JSON ูุงุจูโุฎูุงูุฏู ุชูุณุท ูุงุดู
* **ุฎุฑูุฌ ุฏุงุฑุง ุฒูุงู**: ุจุฑฺุณุจ ุฒูุงู ุฎูุฏฺฉุงุฑ ISO 8601 (ุง ูุงู ูุงู ุฏูุฎูุงู)
* **ูุฑุชุจโุณุงุฒ ูุชุงุฌ**: ุฎุฑูุฌ JSON ูุฑุชุจโุดุฏู ุจุฑ ุงุณุงุณ ุชุฃุฎุฑ (ุณุฑุนโุชุฑู ุฏุฑ ุงุจุชุฏุง)
* **ููุชุฑ ููุท ุณุงููโูุง**: ุงูฺฉุงู ููุงุด ุง ุฎุฑูุฌ ฺฏุฑูุชู ููุท ุงุฒ ููุงุท ุงูุชูุง ุณุงูู

</details>

<details>
<summary><strong>๐ ูุฏุฑุช ูุณุช ู ูุงู</strong></summary>

* **ุญุงูุช ูพุงฺฉโุณุงุฒ ุฎูุฏฺฉุงุฑ**: ุญุฐู ููุงุท ุงูุชูุง ุณุงูู ุงุฒ ูุณุช ููุจุน
* **ุญูุงุธุช ุจุง ูพุดุชุจุงู**: ุงุฌุงุฏ ูุงูโูุง `.backup` ูุจู ุงุฒ ุงุนูุงู ุชุบุฑุงุช
* **ุญูุธ ฺฉุงููุชโูุง**: ูฺฏูโุฏุงุดุชู ุชูุถุญุงุช ู ูุงูุจโุจูุฏ ุฏุฑ ูุณุชโูุง
* **ูุณุชโูุง ุฎูุฏุชุฑูู**: ฺฉูฺฉ ุจู ูฺฏูโุฏุงุฑ ูุฌููุนูโูุง ุจูโุฑูุฒ ู ูุงุจูโุงุนุชูุงุฏ DoH

</details>

<details>
<summary><strong>๐ง ูพฺฉุฑุจูุฏ ู ฺฉุงุฑุจุฑ</strong></summary>

* **ฺฉุงููุงู ูุงุจู ูพฺฉุฑุจูุฏ**: ฺฉูุชุฑู ููู ูพุดโูุฑุถโูุง ุงุฒ ุทุฑู `config.json`
* **ุชูุธู ุชุงูโุงูุช ู ูุญุฏูุฏุชโูุง**: ฺฉูุชุฑู ุฏูู ุชูุงุดโูุงุ ุชุนุฏุงุฏ ูุฎโูุง ู ุขุณุชุงููโูุง
* **ุญุงูุช ุฎุฑูุฌ ุชูุฒ**: ุฎุฑูุฌ ุญุฏุงูู ุจุฑุง ุงุชููุงุณูู ู ูพุงูพโูุงูโูุง ุดูู

</details>

## ๐ ูุตุจ

### ูพุดโูุงุฒูุง

* [Python](http://python.org/downloads/) **ูุณุฎู 3.8 ุจู ุจุงูุง** (ุชูุตู ูโุดูุฏ)

### ฺฉููู ุง ุฏุงูููุฏ

```bash
git clone https://github.com/BLACKGAMER1221/doh_tester.git
cd doh_tester
```

### ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
pip install requests dnspython
```

# ุจุฑุฑุณ ูุตุจ

```bash
python test_doh.py --help
```

## ูุญูู ุงุณุชูุงุฏู ู ุฏุณุชูุฑุงุช

### ุงุณุชูุงุฏู ูพุงู

```bash
python test_doh.py <domain> [options]
```

### ุขุฑฺฏููุงูโูุง ุฎุท ูุฑูุงู

| ุขุฑฺฏููุงู             | ูพุดโูุฑุถ       | ุชูุถุญ                                         |
| ------------------- | ------------- | --------------------------------------------- |
| `domain`            | (ุงูุฒุงู)      | ุฏุงููู ุจุฑุง ุญู (ูุซูุงู `example.com`)           |
| `config--`          | `config.json` | ูุณุฑ ูุงู ูพฺฉุฑุจูุฏ                            |
| `doh-file--`        | `doh.txt`     | ูุณุฑ ูุงู ุญุงู URLูุง DoH                     |
| `timeout--`         | `8.0`         | ุชุงูโุงูุช ูุฑ ุนููุงุช (ุซุงูู)                    |
| `workers--`         | `20`          | ุชุนุฏุงุฏ ูุฎโูุง ููุงุฒ                            |
| `attempts--`        | `3`           | ุชุนุฏุงุฏ ุชูุงุดโูุง DNS ุจุฑุง ูุฑ ููุทู ุงูุชูุง       |
| `min-success--`     | `2`           | ุญุฏุงูู ูพุงุณุฎ ูููู ุจุฑุง ูุถุนุช WORKING            |
| `insecure--`        | `False`       | ุฑุฏ ฺฉุฑุฏู ุจุฑุฑุณ ฺฏูุงู TLS                       |
| `output--`          | (ุฏุงุฑุง ุฒูุงู)  | ูุณุฑ ูุงู ุฎุฑูุฌ                               |
| `working-only--`    | `False`       | ููุงุด ููุท ูุชุงุฌ WORKING                       |
| `no-working-only--` | -             | ููุงุด ููู ูุชุงุฌ (ูุงุฏุฏูโฺฏุฑูุชู ุชูุธู ูพฺฉุฑุจูุฏ) |
| `clean-output--`    | `False`       | ุฎุฑูุฌ ููุท URLูุง ุณุงูู (ูุฑ ุฎุท ฺฉ URL)          |
| `json-output--`     | `False`       | ููุดุชู ุฎุฑูุฌ JSON (ุฎูุฏฺฉุงุฑ ุง ูุณุฑ ูุดุฎุต)        |

</div>

### ูุซุงูโูุง ุงุณุชูุงุฏู

#### ุชุณุช ุณุงุฏู

```bash
python test_doh.py example.com
```

#### ููุงุด ููุท ููุงุท ุงูุชูุง ุณุงูู

```bash
python test_doh.py example.com --working-only
```

#### ุฎุฑูุฌ ุชูุฒ (ููุท ูุณุช URL)

```bash
python test_doh.py example.com --clean-output
```

#### ูพฺฉุฑุจูุฏ ุณูุงุฑุด

```bash
python test_doh.py example.com \
  --doh-file my_doh_list.txt \
  --timeout 10 \
  --workers 30 \
  --attempts 5 \
  --min-success 3
```

#### ุฎุฑูุฌ JSON

```bash
# ูุงู ูุงู JSON ุจุง ุจุฑฺุณุจ ุฒูุงู ุฎูุฏฺฉุงุฑ
python test_doh.py example.com --json-output

# ูุงู ูุงู JSON ูุดุฎุต
python test_doh.py example.com --json-output results.json
```

#### ุชุณุช DoH ุฎุตูุต (ฺฏูุงูโูุง Self-Signed)

```bash
python test_doh.py internal.domain --insecure
```

#### ุชุฑฺฉุจ ฺูุฏ ฺฏุฒูู

```bash
python test_doh.py example.com --working-only --clean-output --json-output --output results.txt
```

---

## ูุงู ูพฺฉุฑุจูุฏ

ุงู ุงุจุฒุงุฑ ุงุฒ ฺฉ ูุงู ูพฺฉุฑุจูุฏ JSON (ุจูโุตูุฑุช ูพุดโูุฑุถ `config.json`) ุจุฑุง ฺฉูุชุฑู ููู ุชูุธูุงุช ุงุณุชูุงุฏู ูโฺฉูุฏ.

### ูพฺฉุฑุจูุฏ ูพุดโูุฑุถ

```json
{
  "doh_file": "doh.txt",
  "output_file": "",
  "timeout": 8.0,
  "workers": 20,
  "attempts": 3,
  "min_success": 2,
  "remove_working_from_doh_file": false,
  "working_only": false,
  "json_output": false,
  "show_headers": true,
  "show_status": true,
  "show_doh_url": true,
  "show_host": true,
  "show_doh_ip": true,
  "show_target_ip": false,
  "show_ping": true
}
```

### ฺฏุฒููโูุง ูพฺฉุฑุจูุฏ

#### ุชูุธูุงุช ูุงู ู ุฎุฑูุฌ

| ฺฏุฒูู         | ููุน    | ุชูุถุญ                               |
| ------------- | ------ | ----------------------------------- |
| `doh_file`    | string | ูุณุฑ ูุงู ุญุงู URLูุง DoH           |
| `output_file` | string | ูุงู ุฎุฑูุฌ ูพุดโูุฑุถ (ุฎุงู = ุจุง ุฒูุงู) |

#### ูพุงุฑุงูุชุฑูุง ุชุณุช

| ฺฏุฒูู         | ููุน     | ุชูุถุญ                           |
| ------------- | ------- | ------------------------------- |
| `timeout`     | float   | ุชุงูโุงูุช ูุฑ ุนููุงุช (ุซุงูู)      |
| `workers`     | integer | ุชุนุฏุงุฏ ูุฎโูุง ููุงุฒ              |
| `attempts`    | integer | ุชุนุฏุงุฏ ุชูุงุด ุจุฑุง ูุฑ ููุทู ุงูุชูุง |
| `min_success` | integer | ุญุฏุงูู ููููุช ุจุฑุง ูุถุนุช WORKING |

#### ูุฏุฑุช ูุงู

| ฺฏุฒูู                          | ููุน     | ุชูุถุญ                           |
| ------------------------------ | ------- | ------------------------------- |
| `remove_working_from_doh_file` | boolean | ุญุฐู ููุงุฑุฏ WORKING ุงุฒ ูุงู ููุจุน  |
| `working_only`                 | boolean | ููุงุด ูพุดโูุฑุถ ููุท ูุชุงุฌ WORKING |

#### ุชูุธูุงุช ุฎุฑูุฌ JSON

| ฺฏุฒูู         | ููุน            | ุชูุถุญ                                                      |
| ------------- | -------------- | ---------------------------------------------------------- |
| `json_output` | boolean/string | `false` (ุจุฏูู JSON)ุ `true`/`"auto"` (ุจุง ุฒูุงู) ุง ูุงู ูุงู |

#### ุชูุธูุงุช ููุงุด

| ฺฏุฒูู            | ููุน     | ุชูุถุญ                |
| ---------------- | ------- | -------------------- |
| `show_headers`   | boolean | ููุงุด ุนููุงู ุณุชููโูุง  |
| `show_status`    | boolean | ููุงุด ุณุชูู STATUS    |
| `show_doh_url`   | boolean | ููุงุด ุณุชูู URL       |
| `show_host`      | boolean | ููุงุด ุณุชูู HOST      |
| `show_doh_ip`    | boolean | ููุงุด ุณุชูู DOH_IP    |
| `show_target_ip` | boolean | ููุงุด ุณุชูู TARGET_IP |
| `show_ping`      | boolean | ููุงุด ุณุชูู PING_MS   |

### ูุฑูุช ูุงู DoH

ูุงู URLูุง DoH (ุจูโุตูุฑุช ูพุดโูุฑุถ `doh.txt`) ุงุฒ ฺฉุงููุช ู ุฎุทูุท ุฎุงู ูพุดุชุจุงู ูโฺฉูุฏ:

```text
# ุณุฑูุฑูุง ุนููู DoH
https://cloudflare-dns.com/dns-query
https://dns.google/dns-query
https://dns.quad9.net/dns-query

# ุฎุตูุต / ุฏุงุฎู
https://doh.internal.company/dns-query
```

---

## ูุฑูุชโูุง ุฎุฑูุฌ

### ุฎุฑูุฌ ูุชู ุงุณุชุงูุฏุงุฑุฏ

```
# Generated: 2026-02-4 08:50:45
STATUS    URL                                   HOST                DOH_IP           PING_MS
------------------------------------------------------------------------------------------------
WORKING   https://cloudflare-dns.com/dns-query  cloudflare-dns.com  104.16.249.249   45.2
WORKING   https://dns.google/dns-query          dns.google          8.8.8.8          32.1
BLOCKED   https://blocked.doh.server/dns-query  blocked.server      -                -
FLAKY     https://unreliable.doh/dns-query      unreliable.doh      192.0.2.1        120.5
```

### ุฎุฑูุฌ ุชูุฒ

ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ `clean-output--`:

```
https://cloudflare-dns.com/dns-query
https://dns.google/dns-query
```

### ุฎุฑูุฌ JSON

```json
[
  {
    "status": "WORKING",
    "url": "https://cloudflare-dns.com/dns-query",
    "host": "cloudflare-dns.com",
    "port": 443,
    "tcp_ok": true,
    "tls_ok": true,
    "tls_info": "cipher=('TLS_AES_256_GCM_SHA384', 'TLSv1.3', 256)...",
    "successes": 3,
    "attempts": 3,
    "target_ips": "93.184.216.34",
    "doh_server_ip": "104.16.249.249",
    "method": "GET-wire",
    "latency_ms": "45.2",
    "notes": ""
  }
]
```

### ุฏุณุชูโุจูุฏ ูุถุนุชโูุง

| ูุถุนุช       | ูุนู                                                                                       |
| ----------- | ------------------------------------------------------------------------------------------ |
| **WORKING** | ููุทู ุงูุชูุง ุชูุงู ุชุณุชโูุง ุฑุง ฺฏุฐุฑุงูุฏู ุงุณุช (TCPุ TLS ู ุชุนุฏุงุฏ ฺฉูุฆุฑโูุง ูููู โฅ min_success)    |
| **FLAKY**   | ููุทู ุงูุชูุง ุจูโุตูุฑุช ุฌุฒุฆ ฺฉุงุฑ ูโฺฉูุฏ (ุจุฑุฎ ฺฉูุฆุฑโูุง ูููู ุจูุฏูโุงูุฏ ูู ฺฉูุชุฑ ุงุฒ min_success) |
| **BLOCKED** | ููุทู ุงูุชูุง ูุงูููู ุงุณุช (ุฎุทุง TCP/TLS ุง ุจุฏูู ฺฉูุฆุฑ ูููู)                                  |

---

## ูฺฉุงุช ู ุจูุชุฑู ุฑูุดโูุง

### ุชูุธู ุนููฺฉุฑุฏ

1. **ุชูุธู ุชุนุฏุงุฏ ูุฎโูุง ุจุฑ ุงุณุงุณ ุงุชุตุงู ุดูุง**:

   * ฺฉูุฏ/ูุงูพุงุฏุงุฑ: `workers 5--`
   * ุณุฑุน/ูพุงุฏุงุฑ: `workers 50--`

2. **ุงูุฒุงุด ุชุงูโุงูุช ุจุฑุง ุดุจฺฉูโูุง ฺฉูุฏ**:

   ```bash
   python test_doh.py example.com --timeout 15
   ```

3. **ฺฉุงูุด ุชูุงุดโูุง ุจุฑุง ุจุฑุฑุณ ุณุฑุน**:

   ```bash
   python test_doh.py example.com --attempts 1 --min-success 1
   ```

### ุชุณุช ูพุงุฏุงุฑ

1. **ุงุณุชูุงุฏู ุงุฒ ุชูุงุดโูุง ุจุดุชุฑ ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ูุญุท ุชููุฏ**:

   ```bash
   python test_doh.py example.com --attempts 5 --min-success 4
   ```

2. **ุชุณุช ฺูุฏ ุฏุงููู**:

   ```bash
   for domain in example.com google.com cloudflare.com; do
     python test_doh.py $domain --json-output --output ${domain}.txt
   done
   ```

### ุงุชููุงุณูู

1. **ฺฉุฑุงูโุฌุงุจ ุจุฑุง ูพุงุด**:

   ```bash
   # ุงุฌุฑุง ุฑูุฒุงูู ุณุงุนุช ณ ุตุจุญ
   0 3 * * * cd /path/to/test_doh && python test_doh.py monitor.domain --json-output >> cron.log 2>&1
   ```

2. **ุงุณฺฉุฑูพุช ุชููุฏ ูุณุช ุชูุฒ**:

   ```bash
   #!/bin/bash
   python test_doh.py example.com --clean-output --working-only --output working_doh.txt --json-output doh_results.json
   ```

### ุนุจโุงุจ

1. **ููู ููุงุท ุงูุชูุง BLOCKED ูุณุชูุฏ**: ุจุฑุฑุณ ฺฉูุฏ ุขุง DoH ุชูุณุท ISP ุง ูุงุฑูุงู ูุณุฏูุฏ ุดุฏู ุงุณุช
2. **ุฎุทุงูุง TLS**: ุจุฑุง ฺฏูุงูโูุง Self-Signed ุงุฒ `insecure--` ุงุณุชูุงุฏู ฺฉูุฏ
3. **Timeout**: ููุฏุงุฑ `timeout--` ุฑุง ุงูุฒุงุด ุฏูุฏ ุง `workers--` ุฑุง ฺฉุงูุด ุฏูุฏ
4. **ุนุฏู ูุฌูุฏ ูุชุฌู**: ุจุฑุฑุณ ฺฉูุฏ ูุงู `doh.txt` ุดุงูู URLูุง ูุนุชุจุฑ ุจุงุดุฏ

---

## ููุงุญุธุงุช ุงููุช

* ฺฏุฒูู `insecure--` ุจุฑุฑุณ ฺฏูุงู TLS ุฑุง ุบุฑูุนุงู ูโฺฉูุฏุ ููุท ุจุฑุง ุชุณุช ุณุฑูุฑูุง ุฎุตูุต ุงุณุชูุงุฏู ุดูุฏ.
* ฺฉูุฆุฑโูุง DoH ุฑูุฒูฺฏุงุฑ ุดุฏูโุงูุฏุ ุงูุง ุณุฑูุฑ ููุตุฏ ูโุชูุงูุฏ ุฏุฑุฎูุงุณุชโูุง DNS ุดูุง ุฑุง ูุดุงูุฏู ฺฉูุฏ.
* ุจุฑุง ุงูุฒููฺฏุ ุชุณุช ุฑุง ุฑู ฺูุฏ ุงุฑุงุฆูโุฏููุฏู DoH ูุฎุชูู ุงูุฌุงู ุฏูุฏ.

---

## ูุฌูุฒ

ูุฌูุฒ MIT โ ุฌุฒุฆุงุช ุฏุฑ ูุงู LICENSE.

---

## ูุดุงุฑฺฉุช

ูุดุงุฑฺฉุชโูุง ุฎูุดโุขูุฏูุฏ! ูุทูุงู Issue ุง Pull Request ุงุฑุณุงู ฺฉูุฏ.

---

## ูุฏุฑุฏุงูโูุง

* [RFC 8484](https://tools.ietf.org/html/rfc8484) โ ฺฉูุฆุฑโูุง DNS ุฑู HTTPS (DoH)
* [dnspython](https://www.dnspython.org/) โ ุงุจุฒุงุฑ DNS ุจุฑุง ูพุงุชูู
* [requests](https://requests.readthedocs.io/) โ ฺฉุชุงุจุฎุงูู HTTP ุจุฑุง ูพุงุชูู
